<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: include/log.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: include/log.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module
 */

import _      from 'lodash';
import colors from 'colors';

// import { mock } from 'mocktail';

import project from './project';

/**
 * The number of spaces to use for a tab when formatting JSON strings.
 */
const JSON_TAB_WIDTH = 2;


/**
 * Logger class. Contains various methods (debug, info, ok, warn, error, etc.)
 * that take a string or object-like value, apply an associated style, and log
 * it. Some styles also prepend an associated icon identifier to the message.
 */
class Log {

	/**
	 * Message styles.
	 *
	 * @since 0.4.0
	 *
	 * @member {Object}
	 */
	get styles() {
		return {
			ok:      [ 'green' ],
			info:    [ 'cyan' ],
			warn:    [ 'yellow', 'underline' ],
			error:   [ 'red', 'underline' ],
			debug:   [ 'cyan', 'underline' ],
			message: [ 'reset' ],
		};
	}

	/**
	 * Message icons. Includes plain-text fallbacks for Windows, since the CMD
	 * prompt supports a very limited character set.
	 *
	 * @since 0.4.0
	 *
	 * @see https://github.com/sindresorhus/log-symbols
	 *
	 * @member {Object}
	 */
	get icons() {

		if ( 'win32' === process.platform ) {
			return {
				ok:    '√',
				info:  'i',
				warn:  '‼',
				error: '×',
				debug: '*',
			};
		}

		return {
			ok:    '✔',
			info:  'ℹ',
			warn:  '⚠',
			error: '✘',
			debug: '✱',
		};
	}

	/**
	 * Class constructor.
	 *
	 * @since 0.4.0
	 */
	constructor() {

		if ( ! this.instance ) {
			this.init();
		}

		return this.instance;
	}

	/**
	 * Initialize class and store the class instance.
	 *
	 * @since 0.5.0
	 */
	init() {

		// Set the colors theme based on our styles.
		colors.setTheme( this.styles );

		// Automatically create methods for each style.
		for ( const style of _.keys( this.styles ) ) {
			this[ style ] = ( message ) => this._log( message, style );
		}

		this.instance = this;
	}

	/**
	 * Logs a message with an optional style.
	 *
	 * If message is an object, array, function, class, etc. it is converted to
	 * a string using `JSON.stringify()`.
	 *
	 * @since 0.4.0
	 *
	 * @access private
	 *
	 * @param {*}      message The message to log.
	 * @param {String} [style] A style to apply to the message.
	 */
	_log( message, style ) {

		// Convert object-like messages to string.
		if ( _.isObjectLike( message ) ) {
			message = JSON.stringify( message, null, JSON_TAB_WIDTH );
		}

		// Don't log anything if message is empty.
		if ( _.isEmpty( message ) ) {
			return;
		}

		// Make sure the message is a string.
		message = message.toString();

		// Check if a valid style was specified.
		if ( style &amp;&amp; message[ style ] ) {

			// Bail if the style is 'debug' and debugging is disabled.
			if ( 'debug' === style &amp;&amp; ! project.debug ) {
				return;
			}

			// If the style has an associated icon, prepend it to the message.
			if ( this.icons[ style ] ) {
				message = `${ this.icons[ style ] } ${ message }`;
			}

			// Apply the style to the message.
			message = message[ style ];
		}

		// Log the message.
		console.log( message );
	}
}

export default new Log();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-include_deps.html">include/deps</a></li><li><a href="module-include_helpers.html">include/helpers</a></li><li><a href="module-include_log.html">include/log</a></li><li><a href="module-include_project.html">include/project</a></li><li><a href="module-include_scaffold.html">include/scaffold</a></li></ul><h3>Classes</h3><ul><li><a href="module-include_deps-Deps.html">Deps</a></li><li><a href="module-include_helpers-Helpers.html">Helpers</a></li><li><a href="module-include_log-Log.html">Log</a></li><li><a href="module-include_project-Project.html">Project</a></li><li><a href="module-include_scaffold-Scaffold.html">Scaffold</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
